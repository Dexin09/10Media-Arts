<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Year 10 Media Home Page</title>
    <link rel="stylesheet" type="text/css" href="https://dexin09.github.io/Year-10_Media-Arts/webdev/default.css">
    <style>
        #toc ul {
            list-style-type: none; /* Remove bullet points */
            padding-left: 0;
        }
        #toc li {
            margin-bottom: 0.5em; /* Add some spacing */
        }
    </style>
</head>
<body class="background">
    <div id="header">
        <br>&nbsp;&nbsp;&nbsp;&nbsp;
        <a href="https://dexin09.github.io/Year-10_Media-Arts">Home</a>&nbsp;&nbsp;&nbsp;&nbsp;
        <a href="https://github.com/Dexin09/Year-10_Media-Arts">GitHub</a>&nbsp;&nbsp;&nbsp;&nbsp;
        <br><br>
    </div>

    <div id="main">
        <div class="title">Year 10 Media Home Page</div>
        <div class="heading">Created and Collated by Liam Moorhouse</div>
        <br><br>

        <div class="body">
            Use the following links to navigate through the work or
            <a href="https://github.com/Dexin09/Year-10_Media-Arts">click here</a>
            to access the main GitHub repo.<br><br>
            <div id="toc">Loading Table of Contents...</div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', async function() {
            const user = 'Dexin09';
            const repo = 'Year-10_Media-Arts';
            const baseUrl = `https://${user}.github.io/${repo}/`;
            const tocUrl = `https://${user}.github.io/${repo}/webdev/toc.json`;

            async function fetchTOC() {
                const response = await fetch(tocUrl);
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.json();
            }

            function generateTOCHTML(toc) {
                let html = '<ul>';
                for (const item of toc) {
                    if (item.type === 'dir') {
                        html += `<li><a href="${baseUrl}${item.path}">${item.name}/</a>`;
                        html += generateTOCHTML(item.contents); // Recursively generate HTML for subfolders
                        html += '</li>';
                    } else if (item.type === 'file') {
                        html += `<li><a href="${baseUrl}${item.path}">${item.name}</a></li>`;
                    }
                }
                html += '</ul>';
                return html;
            }

            try {
                const toc = await fetchTOC();
                const tocHtml = generateTOCHTML(toc);
                document.getElementById('toc').innerHTML = tocHtml;
            } catch (error) {
                console.error('Error generating TOC:', error);
                document.getElementById('toc').innerHTML = 'Failed to load Table of Contents.';
            }
        });
    </script>
</body>
</html>
